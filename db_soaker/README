DB SOAKER

Given any MySQL database schema, I needed a way to intelligently generate random 
data and fill said database in a variety of ways to simulate a customers use case, 
for example we need to be able to control cardinality of certain columns, ranges 
of integers used per columns, rate of operations per table, size of random strings,
 foreign key relationships etc..

Once filled we can then test query performance against very large databases
filled in a variety of ways.

This tool can be used for purely loading data, performing several UPDATEs, SELECTS
or perhaps full CRUD on all tables to perform a stress test.  
I needed this mainly for testing our database engine, but others may find this 
useful for other things.  

The project is very lightweight with only 1 main php file (gen_data.php), a php 
config file and a bash script. The bash script will spawn and manage several 
gen_data instances in parallel if desired and throttle the number of parallel 
clients to suit our needs. 

The config file is what defines what is to be done to generate the random 
data / sql statements on and given tables.

the config file that is needed is basically a php file that defines 3 multidimensional arrays

meta_data -  which defines all of the table and column meta data information
fixed_data - which defines tables and columns that requires some potential fixed data
what_to_do - which defines for each table what you wish to randomly perform on said 
             tables, be it inserts, selects, updates, deletes, or replace, along 
             with a range of sleep time between operations.

Initially this config file can be a hassle to create so to help with that I also 
created a file called make_meta_data.php that will generate the config file based
on an existing mysql database.  Once generated you can then tweak the values to suit your needs.

It might also make sense to have a config for purely loading data into a database 
with a fixed size, and then use a separate config that would perform more selects, updates 
, deletes, etc with specified delays between events.. to simulate a customers steady state 
database usage.

Optionally, gen_data can also be used to generate tab delimited data files to be used for 
loading a database via infile load

Examples:

